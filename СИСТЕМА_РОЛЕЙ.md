# üé≠ –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π - –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω

## üìã –ß—Ç–æ –±—É–¥–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ —Ä–æ–ª–µ–π

### **–¢—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–æ–ª–∏:**

1. **–ü–†–û–ï–ö–¢–ò–†–û–í–©–ò–ö (DESIGNER)** - [–î–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞](./–ü–†–ê–í–ê_–ü–†–û–ï–ö–¢–ò–†–û–í–©–ò–ö–ê.md)
2. **–°–¢–†–û–ò–¢–ï–õ–¨ (BUILDER)** - [–î–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞](./–ü–†–ê–í–ê_–°–¢–†–û–ò–¢–ï–õ–Ø.md)
3. **–ó–ê–ö–ê–ó–ß–ò–ö (CUSTOMER)** - [–î–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞](./–ü–†–ê–í–ê_–ó–ê–ö–ê–ó–ß–ò–ö–ê.md)

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∞–π—Ç–∞:**
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∞–π—Ç–∞ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –ø–æ —Ä–æ–ª—è–º](./–°–¢–†–£–ö–¢–£–†–ê_–°–ê–ô–¢–ê.md)

---

## üîê –î–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### **1. –ü–†–û–ï–ö–¢–ò–†–û–í–©–ò–ö (DESIGNER)**

#### ‚úÖ –ú–æ–∂–µ—Ç:
- **–ü—Ä–æ–µ–∫—Ç—ã:**
  - –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã
  - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã
  - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã
  - –£–ø—Ä–∞–≤–ª—è—Ç—å —ç—Ç–∞–ø–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
  - –ó–∞–≥—Ä—É–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (—á–µ—Ä—Ç–µ–∂–∏, –ø–ª–∞–Ω—ã)
  - –ò–∑–º–µ–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å—ã –ø—Ä–æ–µ–∫—Ç–æ–≤

- **–û–±—ä–µ–∫—Ç—ã:**
  - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã (—Å–≤–æ–∏ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ)
  - –°–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã –¥–ª—è —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
  - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–±—ä–µ–∫—Ç–∞—Ö
  - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ —Ñ–æ—Ç–æ –∏ –ø–∞–Ω–æ—Ä–∞–º—ã –æ–±—ä–µ–∫—Ç–æ–≤

- **–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è:**
  - –ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ç–æ –∏ –ø–∞–Ω–æ—Ä–∞–º—ã
  - –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ó–∞–∫–∞–∑—á–∏–∫—É –∏ –°—Ç—Ä–æ–∏—Ç–µ–ª—é
  - –ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö

- **–ü–ª–∞–≥–∏–Ω—ã:**
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### ‚ùå –ù–µ –º–æ–∂–µ—Ç:
- –£–ø—Ä–∞–≤–ª—è—Ç—å —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Ä–∞–±–æ—Ç–∞–º–∏
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å –æ–ø–ª–∞—Ç—ã
- –£–¥–∞–ª—è—Ç—å –æ–±—ä–µ–∫—Ç—ã –ó–∞–∫–∞–∑—á–∏–∫–∞
- –ò–∑–º–µ–Ω—è—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

---

### **2. –°–¢–†–û–ò–¢–ï–õ–¨ (BUILDER)**

#### ‚úÖ –ú–æ–∂–µ—Ç:
- **–û–±—ä–µ–∫—Ç—ã:**
  - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
  - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã –¥–ª—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞
  - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ñ–æ—Ç–æ –∏ –ø–∞–Ω–æ—Ä–∞–º—ã

- **–ú–µ–¥–∏–∞:**
  - –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–æ—Ç–æ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞
  - –ó–∞–≥—Ä—É–∂–∞—Ç—å –ø–∞–Ω–æ—Ä–∞–º—ã –æ–±—ä–µ–∫—Ç–æ–≤ (360¬∞)
  - –û—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å —Ñ–æ—Ç–æ –≤ –ø–∞–ø–∫–∏
  - –£–¥–∞–ª—è—Ç—å —Å–≤–æ–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- **–†–∞–±–æ—Ç—ã:**
  - –û—Ç–º–µ—á–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã
  - –û–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–∞—Ç—É—Å—ã —ç—Ç–∞–ø–æ–≤ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞
  - –ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ç–æ –∏ –ø–∞–Ω–æ—Ä–∞–º—ã

- **–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è:**
  - –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ó–∞–∫–∞–∑—á–∏–∫—É –∏ –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤—â–∏–∫—É
  - –ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

- **–ü–ª–∞–≥–∏–Ω—ã:**
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω—ã —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞
  - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã

#### ‚ùå –ù–µ –º–æ–∂–µ—Ç:
- –°–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã
- –£–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- –ò–∑–º–µ–Ω—è—Ç—å –ø—Ä–æ–µ–∫—Ç–Ω—ã–µ —á–µ—Ä—Ç–µ–∂–∏
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å –æ–ø–ª–∞—Ç—ã
- –£–¥–∞–ª—è—Ç—å –ø—Ä–æ–µ–∫—Ç—ã

---

### **3. –ó–ê–ö–ê–ó–ß–ò–ö (CUSTOMER)**

#### ‚úÖ –ú–æ–∂–µ—Ç:
- **–û–±—ä–µ–∫—Ç—ã:**
  - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–≤–æ–∏ –æ–±—ä–µ–∫—Ç—ã
  - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã
  - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ñ–æ—Ç–æ –∏ –ø–∞–Ω–æ—Ä–∞–º—ã (—Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ)
  
- **–§–æ—Ç–æ:**
  - –ó–∞–≥—Ä—É–∂–∞—Ç—å —Å–≤–æ–∏ —Ñ–æ—Ç–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–æ—Ç–æ –æ–±—ä–µ–∫—Ç–∞ –¥–æ –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç)
  - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ñ–æ—Ç–æ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ (—Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ)
  - –£–¥–∞–ª—è—Ç—å —Å–≤–æ–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ

- **–î–æ–∫—É–º–µ–Ω—Ç—ã:**
  - –ó–∞–≥—Ä—É–∂–∞—Ç—å —Å–≤–æ–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã (–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã, –∞–∫—Ç—ã –ø—Ä–∏–µ–º–∞-—Å–¥–∞—á–∏, –∏ —Ç.–¥.)
  - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (–ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã)
  - –°–∫–∞—á–∏–≤–∞—Ç—å –æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
  - –£–¥–∞–ª—è—Ç—å —Å–≤–æ–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
  - –í–∏–¥–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–ª–∞—Ç–µ–∂–µ–π

- **–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è:**
  - –ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ç–æ –∏ –ø–∞–Ω–æ—Ä–∞–º—ã
  - –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤—â–∏–∫—É –∏ –°—Ç—Ä–æ–∏—Ç–µ–ª—é
  - –ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ

- **–ü—Ä–æ—Ñ–∏–ª—å:**
  - –£–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º –ø—Ä–æ—Ñ–∏–ª–µ–º
  - –ò–∑–º–µ–Ω—è—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –æ–±—ä–µ–∫—Ç–∞–º

- **–û–ø–ª–∞—Ç–∞:**
  - –ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –æ–ø–ª–∞—Ç—É –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–ª–∞—Ç–µ–∂–µ–π
  - –ü–æ–ª—É—á–∞—Ç—å —Å—á–µ—Ç–∞

#### ‚ùå –ù–µ –º–æ–∂–µ—Ç:
- –ó–∞–≥—Ä—É–∂–∞—Ç—å –ø–∞–Ω–æ—Ä–∞–º—ã (—Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä)
- –°–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã
- –£–ø—Ä–∞–≤–ª—è—Ç—å –æ–±—ä–µ–∫—Ç–∞–º–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ò–∑–º–µ–Ω—è—Ç—å –ø—Ä–æ–µ–∫—Ç—ã
- –£–¥–∞–ª—è—Ç—å —á—É–∂–∏–µ —Ñ–∞–π–ª—ã
- –£–ø—Ä–∞–≤–ª—è—Ç—å –¥—Ä—É–≥–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î –¥–ª—è —Ä–æ–ª–µ–π

### **–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–æ–¥–µ–ª–∏ User:**

```prisma
enum UserRole {
  DESIGNER    // –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤—â–∏–∫
  BUILDER     // –°—Ç—Ä–æ–∏—Ç–µ–ª—å
  CUSTOMER    // –ó–∞–∫–∞–∑—á–∏–∫
  ADMIN       // –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–æ–π)
}

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  name      String?
  role      UserRole @default(CUSTOMER)  // –ò–∑–º–µ–Ω–µ–Ω–æ!
  password  String
  createdAt DateTime @default(now())
  lastLogin DateTime?
  status    UserStatus @default(ACTIVE)
  metadata  String?  // JSON: —Ç–µ–ª–µ—Ñ–æ–Ω, –∫–æ–º–ø–∞–Ω–∏—è, –∑–∞–º–µ—Ç–∫–∏
  
  // –°–≤—è–∑–∏ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–æ–ª–∏)
  objects   Object[]
  messages  Message[]
  photoComments PhotoComment[]
  panoramaComments PanoramaComment[]
  
  @@map("users")
}
```

### **–ù–æ–≤–∞—è –º–æ–¥–µ–ª—å: RolePermissions (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏)**

```prisma
model RolePermission {
  id          Int      @id @default(autoincrement())
  role        UserRole
  resource    String   // "project", "object", "document", etc.
  action      String   // "create", "read", "update", "delete"
  allowed     Boolean  @default(true)
  conditions  String?  // JSON: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
  
  @@unique([role, resource, action])
  @@map("role_permissions")
}
```

### **–ù–æ–≤–∞—è –º–æ–¥–µ–ª—å: UserObjectAssignment (–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º)**

```prisma
model UserObjectAssignment {
  id        Int      @id @default(autoincrement())
  userId    Int
  objectId  Int
  role      UserRole // –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —ç—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
  assignedAt DateTime @default(now())
  
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  object Object @relation(fields: [objectId], references: [id], onDelete: Cascade)
  
  @@unique([userId, objectId])
  @@map("user_object_assignments")
}
```

---

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å

### **1. –°—Ö–µ–º–∞ –ë–î (Prisma)**
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å enum UserRole
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å User
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å RolePermission (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å UserObjectAssignment
- [ ] –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

### **2. –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–æ–ª—è–º–∏**
- [ ] `src/lib/roles.ts` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- [ ] `src/lib/permissions.ts` - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
- [ ] –§—É–Ω–∫—Ü–∏–∏: `canUser()`, `hasRole()`, `checkPermission()`

### **3. Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–µ–π**
- [ ] `src/middleware/roleCheck.ts` - middleware –¥–ª—è API routes
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ä–µ—Å—É—Ä—Å–∞–º

### **4. API Routes —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ä–æ–ª–µ–π**
- [ ] –í—Å–µ API routes –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–æ–ª—å
- [ ] –†–∞–∑–Ω—ã–µ endpoints –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª–µ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –í–æ–∑–≤—Ä–∞—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã—Ö –ø—Ä–∞–≤–∞—Ö

### **5. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å —É—á–µ—Ç–æ–º —Ä–æ–ª–µ–π**
- [ ] –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø–æ —Ä–æ–ª—è–º
- [ ] –†–∞–∑–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª–µ–π
- [ ] –°–∫—Ä—ã—Ç–∏–µ/–ø–æ–∫–∞–∑ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### **6. –¢–∏–ø—ã TypeScript**
- [ ] –¢–∏–ø—ã –¥–ª—è —Ä–æ–ª–µ–π
- [ ] –¢–∏–ø—ã –¥–ª—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- [ ] –¢–∏–ø—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –≤ API:**

```typescript
// src/app/api/projects/route.ts
import { checkRole } from '@/lib/roles';

export async function POST(request: Request) {
  const user = await getCurrentUser();
  
  // –¢–æ–ª—å–∫–æ –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤—â–∏–∫ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã
  if (!checkRole(user, 'DESIGNER')) {
    return Response.json({ error: '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤' }, { status: 403 });
  }
  
  // –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞...
}
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:**

```typescript
// src/components/ProjectForm.tsx
import { useUser } from '@/hooks/useUser';

export function ProjectForm() {
  const { user } = useUser();
  
  if (user?.role !== 'DESIGNER') {
    return <div>–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤</div>;
  }
  
  return <form>...</form>;
}
```

### **–£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥:**

```typescript
// src/components/Dashboard.tsx
{user?.role === 'DESIGNER' && <DesignerDashboard />}
{user?.role === 'BUILDER' && <BuilderDashboard />}
{user?.role === 'CUSTOMER' && <CustomerDashboard />}
```

---

## üöÄ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–ø–æ—à–∞–≥–æ–≤–æ)

### **–®–∞–≥ 1: –°—Ö–µ–º–∞ –ë–î** ‚úÖ –°–ï–ô–ß–ê–°
1. –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å `prisma/schema.prisma`
2. –ò–∑–º–µ–Ω–∏—Ç—å enum UserRole
3. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏
4. –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

### **–®–∞–≥ 2: –£—Ç–∏–ª–∏—Ç—ã**
1. –°–æ–∑–¥–∞—Ç—å `src/lib/roles.ts`
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
3. –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã

### **–®–∞–≥ 3: Middleware**
1. –°–æ–∑–¥–∞—Ç—å middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–µ–π
2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ API routes

### **–®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
1. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–æ–ª—è–º–∏
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å–∞–º

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã —Ä–æ–ª–µ–π

- [ ] –°—Ö–µ–º–∞ –ë–î –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- [ ] –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–µ–π —Å–æ–∑–¥–∞–Ω—ã
- [ ] Middleware —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] API routes –∑–∞—â–∏—â–µ–Ω—ã
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [ ] –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞–ø–∏—Å–∞–Ω–∞

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-01-27
**–°—Ç–∞—Ç—É—Å:** –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

